<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Smart Tools v3.2 Ultra</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        body { 
            background-color: #f8fafc; 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            -webkit-tap-highlight-color: transparent; 
            height: 100dvh; 
            width: 100vw; 
            overflow: hidden;
        }

        .premium-header {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.25) 0%, rgba(236, 72, 153, 0.25) 50%, rgba(251, 191, 36, 0.2) 100%), rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(30px) saturate(200%);
            border-bottom: 2px solid rgba(255, 255, 255, 0.5);
            position: relative;
        }

        .premium-text {
            background: linear-gradient(to right, #4f46e5, #c026d3, #ea580c, #4f46e5);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient-text 4s linear infinite;
        }

        @keyframes gradient-text {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        .bento-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }
        .bento-card:active { transform: scale(0.94); opacity: 0.9; }

        .safe-area-bottom { padding-bottom: calc(env(safe-area-inset-bottom) + 0.5rem); }
        .safe-area-top { padding-top: env(safe-area-inset-top); }
        .hide-scroll::-webkit-scrollbar { display: none; }

        .bmi-gauge-bar {
            background: linear-gradient(to right, #60a5fa 0%, #34d399 25%, #34d399 50%, #fbbf24 75%, #f87171 100%);
            height: 14px;
            border-radius: 7px;
            position: relative;
        }
        .bmi-marker { transition: left 0.5s ease-out; }

        /* Custom Input Styling for better visibility */
        input::placeholder {
            color: rgba(100, 116, 139, 0.5);
            font-weight: 500;
        }
    </style>
</head>
<body class="flex flex-col">

    <div id="app-container" class="flex-1 flex flex-col h-full">
        
        <header class="p-6 pb-6 premium-header safe-area-top z-30">
            <div class="flex justify-between items-center">
                <div class="space-y-0.5">
                    <h1 class="text-2xl font-extrabold premium-text tracking-tighter">Smart Tools</h1>
                    <p class="text-[9px] font-black uppercase tracking-[0.25em] text-slate-600 flex items-center">
                        <span class="flex h-2 w-2 mr-2 bg-indigo-600 rounded-full animate-pulse"></span>
                        ULTRA ENGINE v3.2
                    </p>
                </div>
                <button onclick="window.showSettings()" class="w-11 h-11 bg-white shadow-xl shadow-indigo-100/50 rounded-2xl flex items-center justify-center border border-indigo-50 active:scale-90 transition">
                    <i data-lucide="layout-grid" class="w-5 h-5 text-indigo-600"></i>
                </button>
            </div>
        </header>

        <main class="flex-1 overflow-y-auto p-4 space-y-4 hide-scroll">
            <div class="grid grid-cols-2 gap-4 pb-24">
                <div onclick="window.showTool('calc')" class="bento-card col-span-1 h-44 bg-gradient-to-br from-indigo-600 to-violet-700 rounded-[38px] p-6 text-white flex flex-col justify-between shadow-xl">
                    <div class="w-11 h-11 bg-white/20 rounded-2xl flex items-center justify-center"><i data-lucide="calculator" class="w-5 h-5"></i></div>
                    <span class="font-bold text-lg">Calculator</span>
                </div>
                <div onclick="window.showTool('notes')" class="bento-card col-span-1 h-44 bg-emerald-500 rounded-[38px] p-6 text-white flex flex-col justify-between shadow-xl">
                    <div class="w-11 h-11 bg-white/20 rounded-2xl flex items-center justify-center"><i data-lucide="edit-3" class="w-5 h-5"></i></div>
                    <span class="font-bold text-lg">Quick Notes</span>
                </div>
                <div onclick="window.showTool('unit')" class="bento-card col-span-2 h-36 bg-indigo-900 rounded-[40px] p-6 text-white flex items-center justify-between shadow-xl">
                    <div class="flex flex-col"><span class="font-bold text-xl">Unit Switch</span><span class="text-white/60 text-xs">Universal Conversions Engine</span></div>
                    <div class="w-14 h-14 bg-white/10 rounded-full flex items-center justify-center border border-white/20"><i data-lucide="refresh-cw" class="w-8 h-8"></i></div>
                </div>
                <div onclick="window.showTool('bmi')" class="bento-card col-span-2 h-40 bg-gradient-to-r from-rose-600 via-pink-500 to-orange-500 rounded-[38px] p-6 text-white flex items-center justify-between shadow-xl shadow-rose-200/50">
                    <div class="flex flex-col"><span class="font-bold text-2xl text-white">Health Analysis</span><span class="text-white/90 text-xs font-semibold">BMI & Advanced Metrics</span></div>
                    <div class="w-16 h-16 bg-white/25 rounded-3xl flex items-center justify-center backdrop-blur-md border border-white/40"><i data-lucide="activity" class="w-8 h-8"></i></div>
                </div>
                <div onclick="window.showTool('time')" class="bento-card col-span-1 h-40 bg-amber-500 rounded-[38px] p-6 text-white flex flex-col justify-between shadow-xl">
                    <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center"><i data-lucide="timer" class="w-5 h-5"></i></div>
                    <span class="font-bold text-lg">Time Master</span>
                </div>
                <div onclick="window.showTool('pass')" class="bento-card col-span-1 h-40 bg-slate-800 rounded-[38px] p-6 text-white flex flex-col justify-between shadow-xl">
                    <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center"><i data-lucide="shield-check" class="w-5 h-5"></i></div>
                    <span class="font-bold text-lg">Vault Gen</span>
                </div>
            </div>
        </main>

        <div id="tool-view" class="absolute inset-0 bg-slate-50 z-50 translate-y-full transition-transform duration-500 ease-[cubic-bezier(0.23,1,0.32,1)] flex flex-col">
            <div class="p-4 flex items-center justify-between bg-white border-b safe-area-top">
                <button onclick="window.closeTool()" class="p-3 bg-slate-100 rounded-2xl active:scale-90 transition">
                    <i data-lucide="chevron-down" class="w-6 h-6 text-slate-800"></i>
                </button>
                <h2 id="tool-title" class="text-lg font-bold text-slate-800 tracking-tight">Tool</h2>
                <div id="tool-actions"></div>
            </div>
            <div id="tool-content" class="flex-1 overflow-y-auto hide-scroll"></div>
        </div>

        <div id="settings-view" class="absolute inset-0 bg-white z-[60] translate-x-full transition-transform duration-400 ease-out flex flex-col">
            <div class="p-6 flex items-center justify-between border-b safe-area-top">
                <h2 class="text-xl font-extrabold text-slate-800 tracking-tight">System Info</h2>
                <button onclick="window.closeSettings()" class="p-2 bg-slate-100 rounded-full"><i data-lucide="x" class="w-6 h-6 text-slate-600"></i></button>
            </div>
            <div class="p-6 space-y-6 flex-1 overflow-y-auto">
                <div class="p-8 bg-slate-900 rounded-[40px] text-center">
                    <div class="premium-text text-3xl font-black mb-1">SMART TOOLS</div>
                    <p class="text-slate-500 text-[10px] font-bold tracking-[0.3em]">VERSION 3.2 ULTRA</p>
                </div>
            </div>
        </div>

        <footer class="bg-white border-t flex flex-col items-center justify-center safe-area-bottom">
            <div class="w-full h-12 flex items-center justify-center">
                <div class="text-[9px] text-slate-300 font-bold uppercase tracking-widest bg-slate-50 px-3 py-1 rounded-full">OneClick Studio Hybrid</div>
            </div>
        </footer>
    </div>

    <script>
        let notes = JSON.parse(localStorage.getItem('smart_notes') || '[]');
        let stopwatchInterval, swTime = 0;
        let bmiSystem = 'metric';

        window.onload = () => { lucide.createIcons(); };
        window.vibrate = () => { if (window.navigator?.vibrate) window.navigator.vibrate(25); };

        window.showSettings = () => { window.vibrate(); document.getElementById('settings-view').classList.remove('translate-x-full'); };
        window.closeSettings = () => { window.vibrate(); document.getElementById('settings-view').classList.add('translate-x-full'); };

        window.showTool = (id) => {
            window.vibrate();
            const view = document.getElementById('tool-view');
            const content = document.getElementById('tool-content');
            const title = document.getElementById('tool-title');
            const actions = document.getElementById('tool-actions');
            
            view.classList.remove('translate-y-full');
            actions.innerHTML = '';
            content.className = "flex-1 overflow-y-auto hide-scroll pb-10";

            if (id === 'bmi') {
                title.innerText = "Health Analysis";
                content.classList.add('bg-gradient-to-b', 'from-rose-50', 'via-orange-50', 'to-white');
                content.innerHTML = `
                <div class="p-6 space-y-8">
                    <div class="flex bg-rose-200/30 p-2 rounded-3xl border border-rose-200/50 backdrop-blur-sm">
                        <button onclick="window.setBMISystem('metric')" id="btn-metric" class="flex-1 py-4 rounded-2xl text-xs font-black tracking-widest transition-all bg-white shadow-lg text-rose-600">METRIC</button>
                        <button onclick="window.setBMISystem('imperial')" id="btn-imperial" class="flex-1 py-4 rounded-2xl text-xs font-black tracking-widest transition-all text-slate-500">IMPERIAL</button>
                    </div>

                    <div id="bmi-inputs" class="grid grid-cols-2 gap-4"></div>

                    <button onclick="window.calcBMI()" class="w-full py-6 bg-gradient-to-r from-rose-500 to-rose-600 rounded-[32px] text-white font-black text-lg shadow-2xl shadow-rose-200 active:scale-95 transition-all">Analyze Body Metrics</button>

                    <div id="bmi-res-card" class="hidden p-10 rounded-[48px] border-2 bg-white/90 backdrop-blur-2xl text-center shadow-[0_32px_64px_-12px_rgba(244,63,94,0.15)] transition-all duration-700 transform scale-95">
                        <div id="bmi-label" class="text-[11px] font-black uppercase tracking-[0.3em] mb-3 text-slate-400">Calculated Result</div>
                        <div id="bmi-val" class="text-8xl font-black tracking-tighter leading-none">0.0</div>
                        <div id="bmi-status" class="mt-6 inline-block px-6 py-2.5 rounded-2xl text-[11px] font-black uppercase tracking-widest text-white shadow-lg">HEALTHY</div>
                        
                        <div class="mt-10">
                            <div class="bmi-gauge-bar shadow-inner">
                                <div id="bmi-pointer" class="bmi-marker absolute -top-1.5 w-6 h-6 bg-white border-4 border-slate-900 rounded-full shadow-xl" style="left: 50%"></div>
                            </div>
                            <div class="flex justify-between mt-4 text-[9px] font-black text-slate-400 px-1">
                                <span>UNDER</span><span>NORMAL</span><span>OVER</span><span>OBESE</span>
                            </div>
                        </div>
                    </div>
                </div>`;
                window.setBMISystem('metric');
            } else if (id === 'unit') {
                title.innerText = "Universal Switch";
                content.innerHTML = `<div class="p-6">Unit switch content...</div>`; // Placeholder
            } else if (id === 'calc') {
                title.innerText = "Smart Calculator";
                content.innerHTML = `<div class="h-full bg-slate-950 p-6 flex flex-col justify-end">
                    <div id="c-disp" class="text-white text-7xl font-light text-right mb-10">0</div>
                    <div class="grid grid-cols-4 gap-4">...</div>
                </div>`;
            } else if (id === 'notes') {
                title.innerText = "Quick Notes";
                actions.innerHTML = `<button onclick="window.addNote()" class="p-2.5 bg-emerald-500 text-white rounded-xl"><i data-lucide="plus"></i></button>`;
                window.renderNotes();
            }
            lucide.createIcons();
        };

        window.closeTool = () => { 
            window.vibrate(); 
            document.getElementById('tool-view').classList.add('translate-y-full');
        };

        window.setBMISystem = (sys) => {
            bmiSystem = sys;
            const inputs = document.getElementById('bmi-inputs');
            const bM = document.getElementById('btn-metric');
            const bI = document.getElementById('btn-imperial');
            
            const activeClass = "flex-1 py-4 rounded-2xl text-xs font-black tracking-widest transition-all bg-white shadow-lg text-rose-600";
            const inactiveClass = "flex-1 py-4 rounded-2xl text-xs font-black tracking-widest transition-all text-slate-500";

            if (sys === 'metric') {
                bM.className = activeClass; bI.className = inactiveClass;
                inputs.innerHTML = `
                    <div class="bg-white p-6 rounded-[32px] border-2 border-transparent focus-within:border-rose-400 transition-all shadow-sm">
                        <label class="text-[10px] font-black uppercase text-rose-400 tracking-widest">Height (cm)</label>
                        <input type="number" id="bmi-h" class="bg-transparent w-full text-2xl font-black mt-2 outline-none text-slate-900" placeholder="175">
                    </div>
                    <div class="bg-white p-6 rounded-[32px] border-2 border-transparent focus-within:border-rose-400 transition-all shadow-sm">
                        <label class="text-[10px] font-black uppercase text-rose-400 tracking-widest">Weight (kg)</label>
                        <input type="number" id="bmi-w" class="bg-transparent w-full text-2xl font-black mt-2 outline-none text-slate-900" placeholder="70">
                    </div>`;
            } else {
                bI.className = activeClass; bM.className = inactiveClass;
                inputs.innerHTML = `
                    <div class="bg-white p-6 rounded-[32px] border-2 border-transparent focus-within:border-rose-400 transition-all shadow-sm col-span-1">
                        <label class="text-[10px] font-black uppercase text-rose-400 tracking-widest">Height (Ft)</label>
                        <input type="number" id="bmi-h-ft" class="bg-transparent w-full text-2xl font-black mt-2 outline-none text-slate-900" placeholder="5">
                    </div>
                    <div class="bg-white p-6 rounded-[32px] border-2 border-transparent focus-within:border-rose-400 transition-all shadow-sm col-span-1">
                        <label class="text-[10px] font-black uppercase text-rose-400 tracking-widest">Inches</label>
                        <input type="number" id="bmi-h-in" class="bg-transparent w-full text-2xl font-black mt-2 outline-none text-slate-900" placeholder="9">
                    </div>
                    <div class="bg-white p-6 rounded-[32px] border-2 border-transparent focus-within:border-rose-400 transition-all shadow-sm col-span-2">
                        <label class="text-[10px] font-black uppercase text-rose-400 tracking-widest">Weight (lbs)</label>
                        <input type="number" id="bmi-w-lb" class="bg-transparent w-full text-2xl font-black mt-2 outline-none text-slate-900" placeholder="150">
                    </div>`;
            }
        };

        window.calcBMI = () => {
            window.vibrate();
            let h, w;
            if (bmiSystem === 'metric') {
                h = parseFloat(document.getElementById('bmi-h').value) / 100;
                w = parseFloat(document.getElementById('bmi-w').value);
            } else {
                const ft = parseFloat(document.getElementById('bmi-h-ft').value) || 0;
                const inc = parseFloat(document.getElementById('bmi-h-in').value) || 0;
                h = ((ft * 12) + inc) * 0.0254;
                w = parseFloat(document.getElementById('bmi-w-lb').value) * 0.453592;
            }

            if (!h || !w) return;
            const bmi = (w / (h * h)).toFixed(1);
            const card = document.getElementById('bmi-res-card');
            const val = document.getElementById('bmi-val');
            const stat = document.getElementById('bmi-status');
            const ptr = document.getElementById('bmi-pointer');

            card.classList.remove('hidden');
            setTimeout(() => card.classList.remove('scale-95'), 50);
            val.innerText = bmi;

            let color, text, pct;
            if (bmi < 18.5) { color = '#60a5fa'; text = 'UNDERWEIGHT'; pct = '10%'; }
            else if (bmi < 25) { color = '#10b981'; text = 'HEALTHY'; pct = '40%'; }
            else if (bmi < 30) { color = '#f59e0b'; text = 'OVERWEIGHT'; pct = '70%'; }
            else { color = '#ef4444'; text = 'OBESE'; pct = '90%'; }

            card.style.borderColor = color + '40';
            val.style.color = color;
            stat.innerText = text;
            stat.style.backgroundColor = color;
            ptr.style.left = pct;
            card.scrollIntoView({ behavior: 'smooth', block: 'end' });
        };

        window.renderNotes = () => {
            const cont = document.getElementById('tool-content');
            if (notes.length === 0) cont.innerHTML = `<div class="p-20 text-center opacity-20"><i data-lucide="sticky-note" class="mx-auto w-16 h-16"></i><p class="mt-4 font-bold uppercase tracking-widest text-xs">Empty</p></div>`;
            else cont.innerHTML = `<div class="p-4 space-y-4">` + notes.map((n, i) => `<div class="bg-white p-6 rounded-[32px] border border-slate-100 flex justify-between items-center shadow-sm"><div class="flex-1 pr-4"><p class="font-bold text-slate-800">${n.text}</p></div><button onclick="window.delNote(${i})" class="w-10 h-10 bg-rose-50 text-rose-400 rounded-xl flex items-center justify-center"><i data-lucide="trash-2" class="w-4 h-4"></i></button></div>`).join('') + `</div>`;
            lucide.createIcons();
        };

        window.addNote = () => { const t = prompt("Note Content:"); if (t) { notes.unshift({ text: t }); localStorage.setItem('smart_notes', JSON.stringify(notes)); window.renderNotes(); } };
        window.delNote = (i) => { notes.splice(i, 1); localStorage.setItem('smart_notes', JSON.stringify(notes)); window.renderNotes(); window.vibrate(); };
    </script>
</body>
</html>